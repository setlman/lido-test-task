# alertmanager/templates/docker-compose.yml.j2

services:
  alertmanager:
    image: "{{ alertmanager_image }}:{{ alertmanager_image_tag }}"
    container_name: "{{ alertmanager_container_name }}"
    ports:
      {% for port in alertmanager_ports %}
      - "{{ port }}"
      {% endfor %}
    restart: "{{ alertmanager_restart_policy }}"
    networks:
      {% for network in alertmanager_networks %}
      - "{{ network }}"
      {% endfor %}
    labels:
      {% for key, value in alertmanager_labels.items() %}
      {{ key }}: "{{ value }}"
      {% endfor %}

networks:
  {% for network_name, network_def in alertmanager_network_definitions.items() %}
  {{ network_name }}:
    {% for key, value in network_def.items() %}
    {{ key }}: {{ value }}
    {% endfor %}
  {% endfor %}
